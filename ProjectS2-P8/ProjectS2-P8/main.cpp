
#include <iostream>
#include <stdlib.h> 
#include <windows.h>
#include <chrono>
#include <thread>

#include "Obstacle.h"
#include "EcranPrincipal.h"
#include "Plane.h"
#include "Game.h"
#include "Player.h"
#include "const.h"

using namespace std;

void gotoxy(int x, int y)
{
	COORD coord = { x, y };
	SetConsoleCursorPosition(GetStdHandle(STD_OUTPUT_HANDLE), (coord));
}
void printArt();

int main()
{
	using namespace std::this_thread;     // sleep_for, sleep_until
	using namespace std::chrono_literals; // ns, us, ms, s, h, etc.
	using std::chrono::system_clock;
	// cout << "||---||\n||   ||\n||   ||\n||WTC||\n||   ||\n||   ||\n||   ||\n";
	printArt();
    sleep_for(5s);
	EcranPrincipal ecran;
	ecran.printMenu();
	Player *player = new Player(ecran.getUserName(), ecran.getScore());
	system("cls");
	Game *game = new Game();
	game->takeoff();
	while (!game->stat->close)
	{
		sleep_for(std::chrono::milliseconds(100/(game->stat->getSpeed() / 2)));
		system("cls");
		game->update();
	}
	return 0;
}
void printArt() {
    std::string art = R"(
                   .:..   .*+                                                     .##-%=.         +@
                   .%-    .*+                                                  .#@#:...=%%=       +@
                   .%-    .*+                                                   .:*%-.*@=:..      +@
                   .%-    .*+                                               ....   .%@*. ...      +@
      .-++++++++++++@*+++++%#+++++++++++=:.         ..-+#%=..          ..-*%%%@@%-. -*.           +@
      *#................................:@-        =@#=...-==+.   ..-*%#=.:@*:..*#....           +@
      **................................:%-   ...  :@+.     .:#@*-#@#-.    :%*::*%%%%%@%-.        +@
      .=#@############################%%*:.:*@@%%:...##.    .-#@#:...       ..::.......+@#.       +@
        :%:                          .+*  =%:...:##...+%:=#@*-...              .  .:*%#-+#.       +@
        .%+::::::::::::::::::::::::::-%+  -@-   ..-@+=#%*:..                 ..=#%#=:..=%-        +@
         .:-*%--------------------=@+-:.  .*#.     .-:..      ....:-==:.:=*#%#+-....:*%+..        +@
             *#...               :@=       .#=.           .+#%%%#*+=-=@*+-......:+#%+..           +@
             .*#..              :%=.        -@=.....::-=*#%@:      .-@-  ..:=#%%+:.               +@
              .*%.             :%+.          :@%###*=:.   :%.      :%*+%@%#=. ....                +@
               .*%#############@=             :%#:.     ..=#.     .%*:.                           +@
                -%............:%:              ..=%@@@@@%*#*.    .*#.                             +@
                -%.           :%:                .  ..   .**.   .+#..                             +@
                -%.           :%:                        .#+   .=@:.                              +@
                -%.           :%:                        .#*+#%%*:.             ....::..          +@
                -%.           :%:                         ... ...  .....::-=+#@@%##*=-##.         +@
                -%.           :%:                       .....:-=+*%@@%#*+-:.        ..=@:         +@
                -%.           :%:            ......:=#@@@@@%+-...       ......:-*%@@@@*..         +@
        .-=-..  -%.           :%:    ..:-+#%@@%#*+-:......      ..:-=*%%@@%#+-:.....=%.           +@
       +%-:-%*. -%.           :@%%@%*+=-:....  ........-+*#%%@%#+=-::-#..  .......  =%.           +@
      .%=   :%: -%.           :%:.      ...:-+*#%%%%*+-##....        -#.            =%..+:        +@
      .=%=-=%+. -%.           :%==+*#%%%#@*=:....      **.           -#.            =%..*-.       +@
       ..:=-... -%.           :%=:..... .%-            **.           -#.            =%..+:        +@
                -%.           :%:       .%-            **.           -#.            =%..#=        +@
                -%.           :%:       .%-            **.           -#.            =%..#=        +@
                -%.           :%:       .%-            **.           -#.            =%..#=        +@
             .. -%.           :%:       .%-            **.           -#.            =%..#=        +@
             +# -%.           :%#########@%############%%############%@#############%%..#=        +@
             .. -%.           :%:........%-............**............-#.............=%..#=        +@
             +# -%.           :%:       .%-.           **.          .-#.            =%..#-        +@
             +# -%.           :%:       .%-            **.           -#.            =%.           +@
             +# -%.           :%:       .%-            **.           -#.            =%.           +@
             +# -%.           :%:       .%-            **.           -#.            =%.           +@
             +# -%.           :%=--------%+------------##------------+%-------------+%.           +@
             =+ -%.           :%=--------%+------------##------------+%-------------+%.           +@
               .=@%%%%%%%%%%%%%%:.      .%-            **.           -#.            =%.           +@
               -@-.............=%:.     .%-            **.           -#.            =%.           +@
         ..=*##@=.....         .+%.     .%-            **.           -#.   ..-*##+-.=%.           +@
        .*%-.  .*@@%%%-.         =@:    .%-            **.           -#.  .+@=. ..+@@%%%=.       .%@
*.    ..*#.......-@:..#+..........=%.....%-............**............-#...+#........%:..##..    .#@@
    )";

    std::cout << art << std::endl;
}
